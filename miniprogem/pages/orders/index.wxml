<t-navbar left-arrow title="我的订单" />
<view class="orders">
  <t-tabs defaultValue="{{current}}" bindchange="onTabChange">
    <block wx:for="{{statusTabs}}" wx:key="value">
      <t-tab-panel label="{{item.label}}" value="{{item.value}}"></t-tab-panel>
    </block>
  </t-tabs>

  <view class="sort-actions">
    <t-button size="small" variant="outline" bindtap="sortByTimeDesc">按时间倒序</t-button>
    <t-button size="small" variant="outline" bindtap="sortByTimeAsc">按时间正序</t-button>
  </view>

  <!-- 加载中 -->
  <view wx:if="{{loading}}" class="loading-container">
    <t-loading theme="circular" size="48rpx" text="加载中..." />
  </view>

  <!-- 空状态 -->
  <view wx:elif="{{displayList.length === 0}}" class="empty-container">
    <t-empty icon="info-circle-filled" description="暂无订单" />
  </view>

  <!-- 订单列表 -->
  <t-cell-group wx:else>
    <t-cell
      wx:for="{{displayList}}"
      wx:key="id"
      title="{{item.title || item.type}} · ¥{{item.amount}}"
      description="{{item.description}}"
      note=""
      hover
      data-id="{{item.id}}"
      bindtap="goDetail"
    >
      <t-tag slot="note" size="small" theme="{{item.statusTag.theme}}" variant="light">{{item.statusTag.text}}</t-tag>
      <view slot="description" class="desc">
        <text class="order-no" wx:if="{{item.orderNo}}">#{{item.orderNo}}</text>
        <text class="line">{{item.description}}</text>
        <text class="line">期望：{{item.expectedTime || '未填'}}</text>
        <text class="time">{{item.createdAt}}</text>
      </view>
    </t-cell>
  </t-cell-group>
</view>
