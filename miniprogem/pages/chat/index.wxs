/** 将数字补足2位 */
function formatNum(num) {
  return num < 10 ? '0' + num : num;
}

/** 格式化时间 */
function formatTime(time) {
  var t = typeof time === 'string' ? Date.parse(time) : time;
  var date = getDate(t);
  var now = getDate();
  var Y = date.getFullYear(),
    M = date.getMonth() + 1,
    D = date.getDate(),
    h = date.getHours(),
    m = date.getMinutes();
  var Y0 = now.getFullYear(),
    M0 = now.getMonth() + 1,
    D0 = now.getDate();
  if (Y === Y0) {
    if (M === M0 && D === D0) return '今天 ' + formatNum(h) + ':' + formatNum(m);
    if (M === M0 && D === D0 - 1) return '昨天 ' + formatNum(h) + ':' + formatNum(m);
    return M + '月' + D + '日 ' + formatNum(h) + ':' + formatNum(m);
  }
  return Y + '年' + M + '月' + D + '日 ' + formatNum(h) + ':' + formatNum(m);
}

function isGap(list, index) {
  if (index === 0) return true;
  var prev = list[index - 1];
  var curr = list[index];
  var prevTime = typeof prev.createdAt === 'string' ? Date.parse(prev.createdAt) : prev.createdAt;
  var currTime = typeof curr.createdAt === 'string' ? Date.parse(curr.createdAt) : curr.createdAt;
  return currTime - prevTime > 120000;
}

module.exports = {
  formatTime: formatTime,
  isGap: isGap,
};
