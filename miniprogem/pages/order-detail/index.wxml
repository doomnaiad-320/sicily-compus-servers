<view class="order-detail">
  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{loading}}" class="loading-container">
    <t-loading theme="circular" size="48rpx" text="åŠ è½½ä¸­..." />
  </view>

  <!-- è®¢å•å†…å®¹ -->
  <view wx:elif="{{order}}" class="order-content">
    <!-- é¡¶éƒ¨çŠ¶æ€å¡ç‰‡ -->
    <view class="status-card" style="background: {{statusBgColor}};">
      <view class="status-info">
        <text class="status-text">{{statusText}}</text>
        <text class="order-no">#{{order.orderNo || order.id}}</text>
      </view>
      <view class="amount-info">
        <text class="amount-label">æœåŠ¡è´¹ç”¨</text>
        <text class="amount-value">Â¥{{order.amount}}</text>
      </view>
    </view>

    <!-- æœåŠ¡ä¿¡æ¯å¡ç‰‡ -->
    <view class="info-card">
      <view class="card-title">æœåŠ¡ä¿¡æ¯</view>
      <view class="info-row">
        <text class="info-label">æœåŠ¡ç±»å‹</text>
        <text class="info-value">{{order.type}}</text>
      </view>
      <view class="info-row" wx:if="{{order.title}}">
        <text class="info-label">è®¢å•æ ‡é¢˜</text>
        <text class="info-value">{{order.title}}</text>
      </view>
      <view class="info-row desc-row">
        <text class="info-label">éœ€æ±‚æè¿°</text>
        <text class="info-value desc-text">{{order.description}}</text>
      </view>
    </view>

    <!-- æ—¶é—´åœ°ç‚¹å¡ç‰‡ -->
    <view class="info-card">
      <view class="card-title">æ—¶é—´åœ°ç‚¹</view>
      <view class="info-row">
        <text class="info-icon">ğŸ“</text>
        <text class="info-value flex-1">{{order.address}}</text>
      </view>
      <view class="info-row" wx:if="{{order.expectedTime}}">
        <text class="info-icon">â°</text>
        <text class="info-value flex-1">{{order.expectedTime}}</text>
      </view>
    </view>

    <!-- è”ç³»ä¿¡æ¯å¡ç‰‡ï¼ˆéå…¬å¼€è®¢å•æ‰æ˜¾ç¤ºï¼‰ -->
    <view class="info-card" wx:if="{{order.contactName || order.contactPhone}}">
      <view class="card-title">è”ç³»æ–¹å¼</view>
      <view class="info-row" wx:if="{{order.contactName}}">
        <text class="info-icon">ğŸ‘¤</text>
        <text class="info-value flex-1">{{order.contactName}}</text>
      </view>
      <view class="info-row" wx:if="{{order.contactPhone}}">
        <text class="info-icon">ğŸ“</text>
        <text class="info-value flex-1">{{order.contactPhone}}</text>
        <t-button size="extra-small" theme="primary" variant="outline" data-phone="{{order.contactPhone}}" bindtap="callPhone">æ‹¨æ‰“</t-button>
      </view>
    </view>

    <!-- å›¾ç‰‡å±•ç¤º -->
    <view class="info-card" wx:if="{{order.images && order.images.length > 0}}">
      <view class="card-title">ç›¸å…³å›¾ç‰‡</view>
      <view class="image-list">
        <image
          wx:for="{{order.images}}"
          wx:key="index"
          src="{{item}}"
          mode="aspectFill"
          class="order-image"
          data-url="{{item}}"
          bindtap="previewImage"
        />
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:else class="empty-container">
    <t-empty icon="info-circle-filled" description="è®¢å•ä¸å­˜åœ¨" />
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="action-bar" wx:if="{{actions.length > 0}}">
    <t-button
      wx:for="{{actions}}"
      wx:key="key"
      theme="{{item.theme}}"
      size="large"
      class="action-btn"
      data-key="{{item.key}}"
      loading="{{submitting}}"
      bindtap="onActionTap"
    >
      {{item.text}}
    </t-button>
  </view>
</view>
